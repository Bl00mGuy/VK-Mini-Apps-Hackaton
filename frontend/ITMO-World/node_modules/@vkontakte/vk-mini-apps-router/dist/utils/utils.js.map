{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/utils/utils.ts"],"names":[],"mappings":"AAAA,OAAO,EAEL,UAAU,GAKX,MAAM,mBAAmB,CAAC;AAG3B,OAAO,EAAE,oBAAoB,EAAE,qBAAqB,EAAE,MAAM,UAAU,CAAC;AAIvE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAC,GAAY,EAAiB,EAAE,CAAC,OAAO,GAAG,KAAK,QAAQ,CAAC;AAEjF,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,IAAsB,EAAyC,EAAE;IAC5F,OAAO,OAAO,IAAI,KAAK,QAAQ,IAAI,MAAM,IAAI,IAAI,CAAC;AACpD,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,qBAAqB,GAAG,CACnC,IAAsB,EACiD,EAAE;IACzE,OAAO,OAAO,IAAI,KAAK,QAAQ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;AACzD,CAAC,CAAC;AAEF,MAAM,UAAU,YAAY,CAAC,IAAwB;IACnD,OAAO,IAAI,EAAE,KAAK,CAAC,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;AACjF,CAAC;AAED,MAAM,UAAU,kBAAkB,CAAC,IAAY,EAAE,MAAe;IAC9D,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;IACtC,MAAM,aAAa,GAAG,CAAC,GAAW,EAAE,KAAa,EAAU,EAAE;QAC3D,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;QACzC,SAAS,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,EAAE,qBAAqB,SAAS,yBAAyB,IAAI,EAAE,CAAC,CAAC;QAC9F,OAAO,GAAG,CAAC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,SAAS,CAAW,CAAC,CAAC;IACzD,CAAC,CAAC;IACF,OAAO,UAAU,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,eAAe,CAC7B,KAAkB,EAClB,gBAA0B,EAAE;IAE5B,OAAO;QACL,KAAK;QACL,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC,MAAM;YACzB,CAAC,CAAE,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAA8C;YACvF,CAAC,CAAC,SAAS;QACb,aAAa,EAAE,aAAa;KAC7B,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,QAAkB;IAC7C,OAAO,QAAQ,CAAC,KAAK,IAAI,oBAAoB,IAAI,QAAQ,CAAC,KAAK,CAAC;AAClE,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,QAAkB;IAC9C,OAAO,QAAQ,CAAC,KAAK,IAAI,qBAAqB,IAAI,QAAQ,CAAC,KAAK,CAAC;AACnE,CAAC;AAED,MAAM,UAAU,SAAS;IACvB,MAAM,oBAAoB,GAAG,EAAE,CAAC;IAChC,MAAM,sBAAsB,GAAG,CAAC,CAAC;IACjC,MAAM,SAAS,GAAG,CAAC,CAAC;IACpB,OAAO,IAAI,CAAC,MAAM,EAAE;SACjB,QAAQ,CAAC,oBAAoB,CAAC;SAC9B,SAAS,CAAC,sBAAsB,EAAE,sBAAsB,GAAG,SAAS,CAAC,CAAC;AAC3E,CAAC;AAED,MAAM,UAAU,cAAc,CAAC,gBAAyD;IACtF,OAAO,gBAAgB,CAAC,WAAW,IAAI,gBAAgB,CAAC,IAAI,IAAI,WAAW,CAAC;AAC9E,CAAC;AAED,MAAM,UAAU,OAAO,CAAC,IAAS,EAAE,OAAe;IAChD,IAAI,CAAC,IAAI,EAAE;QACT,IAAI,OAAO,OAAO,KAAK,WAAW;YAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAE1D,IAAI;YACF,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;SAC1B;QAAC,OAAO,CAAC,EAAE,GAAE;KACf;AACH,CAAC;AAMD,MAAM,UAAU,SAAS,CAAC,KAAU,EAAE,OAAgB;IACpD,IAAI,KAAK,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,WAAW,EAAE;QACrE,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;KAC1B;AACH,CAAC;AAED,MAAM,UAAU,+BAA+B,CAAC,EAAoB,EAAE,eAAe,GAAG,EAAE;IACxF,IAAI,QAAQ,CAAC,EAAE,CAAC,EAAE;QAChB,OAAO,EAAE,CAAC;KACX;IAED,MAAM,IAAI,GAAG,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,QAAQ,IAAI,eAAe,CAAC;IAEzE,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;QAClB,OAAO,IAAI,CAAC;KACb;IAED,OAAO,IAAI,CAAC,IAAI,CAAC;AACnB,CAAC;AAED,MAAM,UAAU,qBAAqB,CACnC,eAAkE,EAAE;IAEpE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,YAAY,YAAY,eAAe,CAAC,EAAE;QACzE,OAAO,GAAG,IAAI,eAAe,CAAC,YAAY,CAAC,EAAE,CAAC;KAC/C;IAED,OAAO,YAAY,CAAC,QAAQ,EAAE,CAAC;AACjC,CAAC;AAED,MAAM,UAAU,aAAa,CAAC,EAC5B,EAAE,EACF,MAAM,EACN,eAAe,GAAG,EAAE,GAKrB;IACC,MAAM,IAAI,GAAG,+BAA+B,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;IAClE,MAAM,MAAM,GAAG,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACjF,MAAM,SAAS,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;IAEhD,IAAI,SAAS,EAAE;QACb,MAAM,UAAU,GAAG,kBAAkB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;QAEpD,OAAO,qBAAqB,CAAC,EAAE,CAAC;YAC9B,CAAC,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;YACrD,CAAC,CAAC,UAAU,CAAC;KAChB;IAED,OAAO,qBAAqB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,EAAE,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAC1F,CAAC","sourcesContent":["import {\n  AgnosticRouteMatch,\n  createPath,\n  Location,\n  Params,\n  Path,\n  RouterState,\n} from '@remix-run/router';\nimport { RouteContextObject } from '../contexts';\nimport { PageInternal } from '../type';\nimport { STATE_KEY_SHOW_MODAL, STATE_KEY_SHOW_POPOUT } from '../const';\nimport { ExtendedPath, ExtendedPathWithParams, NavigationTarget } from '../services';\nimport { Page, PageWithParams } from '../page-types/common';\n\nexport const isString = (tmp: unknown): tmp is string => typeof tmp === 'string';\n\nexport const isPageObject = (path: NavigationTarget): path is Page | PageWithParams<string> => {\n  return typeof path === 'object' && 'path' in path;\n};\n\nexport const isPageWithOptionsPath = (\n  path: NavigationTarget,\n): path is Partial<Path> | ExtendedPathWithParams<string> | ExtendedPath => {\n  return typeof path === 'object' && !isPageObject(path);\n};\n\nexport function getParamKeys(path: string | undefined): string[] {\n  return path?.match(/\\/:[^\\/]+/g)?.map((param) => param.replace('/', '')) ?? [];\n}\n\nexport function fillParamsIntoPath(path: string, params?: Params): string {\n  const parameters = getParamKeys(path);\n  const paramInjector = (acc: string, param: string): string => {\n    const paramName = param.replace(':', '');\n    invariant(params?.[paramName], `Missing parameter ${paramName} while building route ${path}`);\n    return acc.replace(param, params[paramName] as string);\n  };\n  return parameters.reduce(paramInjector, path);\n}\n\nexport function getRouteContext(\n  state: RouterState,\n  panelsHistory: string[] = [],\n): RouteContextObject {\n  return {\n    state,\n    match: state.matches.length\n      ? (state.matches[state.matches.length - 1] as AgnosticRouteMatch<string, PageInternal>)\n      : undefined,\n    panelsHistory: panelsHistory,\n  };\n}\n\nexport function isModalShown(location: Location): boolean {\n  return location.state && STATE_KEY_SHOW_MODAL in location.state;\n}\n\nexport function isPopoutShown(location: Location): boolean {\n  return location.state && STATE_KEY_SHOW_POPOUT in location.state;\n}\n\nexport function createKey() {\n  const allNumbersAndLetters = 36;\n  const positionAfterZeroAnDot = 2;\n  const keyLength = 7;\n  return Math.random()\n    .toString(allNumbersAndLetters)\n    .substring(positionAfterZeroAnDot, positionAfterZeroAnDot + keyLength);\n}\n\nexport function getDisplayName(WrappedComponent: { displayName?: string; name?: string }) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n\nexport function warning(cond: any, message: string) {\n  if (!cond) {\n    if (typeof console !== 'undefined') console.warn(message);\n\n    try {\n      throw new Error(message);\n    } catch (e) {}\n  }\n}\n\nexport function invariant(value: boolean, message?: string): asserts value;\n\nexport function invariant<T>(value: T | null | undefined, message?: string): asserts value is T;\n\nexport function invariant(value: any, message?: string) {\n  if (value === false || value === null || typeof value === 'undefined') {\n    throw new Error(message);\n  }\n}\n\nexport function extractPathFromNavigationTarget(to: NavigationTarget, defaultPathname = '') {\n  if (isString(to)) {\n    return to;\n  }\n\n  const path = isPageObject(to) ? to.path : to.pathname || defaultPathname;\n\n  if (isString(path)) {\n    return path;\n  }\n\n  return path.path;\n}\n\nexport function transformSearchParams(\n  searchParams: URLSearchParams | Record<string, string> | string = '',\n) {\n  if (!isString(searchParams) && !(searchParams instanceof URLSearchParams)) {\n    return `${new URLSearchParams(searchParams)}`;\n  }\n\n  return searchParams.toString();\n}\n\nexport function getPathFromTo({\n  to,\n  params,\n  defaultPathname = '',\n}: {\n  to: NavigationTarget;\n  params?: Params;\n  defaultPathname?: string;\n}) {\n  const path = extractPathFromNavigationTarget(to, defaultPathname);\n  const search = isPageWithOptionsPath(to) ? transformSearchParams(to.search) : '';\n  const hasParams = getParamKeys(path).length > 0;\n\n  if (hasParams) {\n    const filledPath = fillParamsIntoPath(path, params);\n\n    return isPageWithOptionsPath(to)\n      ? createPath({ ...to, pathname: filledPath, search })\n      : filledPath;\n  }\n\n  return isPageWithOptionsPath(to) ? createPath({ ...to, pathname: path, search }) : path;\n}\n"]}