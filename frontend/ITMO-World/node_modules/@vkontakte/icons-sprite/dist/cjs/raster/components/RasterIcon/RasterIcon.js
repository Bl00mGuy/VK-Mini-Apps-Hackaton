"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "makeRasterIcon", {
    enumerable: true,
    get: function() {
        return makeRasterIcon;
    }
});
var _interop_require_default = require("@swc/helpers/_/_interop_require_default");
var _object_spread = require("@swc/helpers/_/_object_spread");
var _object_without_properties = require("@swc/helpers/_/_object_without_properties");
var _react = _interop_require_default._(require("react"));
var _IconAppearanceProvider = require("../IconAppearanceProvider/IconAppearanceProvider");
var _getDensityBucketAppearanceKey = require("./utils/getDensityBucketAppearanceKey");
// https://developer.android.com/training/multiscreen/screendensities#TaskProvideAltBmp
var dppxModifiersMap = {
    mdpi: 1,
    hdpi: 1.5,
    // Должно быть 2, но так как мы пропускаем при генерации hdpi, понижаем это значение.
    // Считаем избыточным генерацию hdpi, xhdpi в использовании для hdpi не сильно шакалится.
    xhdpi: 1.5,
    xxhdpi: 3,
    xxxhdpi: 4
};
var densityBucketTypes = Object.keys(dppxModifiersMap);
var RasterIcon = /*#__PURE__*/ _react.default.memo(function RasterIcon(_param) {
    var getRootRef = _param.getRootRef, id = _param.id, size = _param.size, className = _param.className, restProps = _object_without_properties._(_param, [
        "getRootRef",
        "id",
        "size",
        "className"
    ]);
    var appearance = (0, _IconAppearanceProvider.useIconAppearance)();
    var srcSet = densityBucketTypes.reduce(function(set, densityBucket) {
        var densityAppearanceKey = (0, _getDensityBucketAppearanceKey.getDensityBucketAppearanceKey)(appearance, densityBucket);
        var src = restProps[densityAppearanceKey];
        delete restProps[densityAppearanceKey];
        var _iteratorNormalCompletion = true, _didIteratorError = false, _iteratorError = undefined;
        try {
            for(var _iterator = _IconAppearanceProvider.appearanceTypes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true){
                var appearance1 = _step.value;
                var densityAppearanceKey1 = (0, _getDensityBucketAppearanceKey.getDensityBucketAppearanceKey)(appearance1, densityBucket);
                if (!src) {
                    src = restProps[densityAppearanceKey1];
                }
                delete restProps[densityAppearanceKey1];
            }
        } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
        } finally{
            try {
                if (!_iteratorNormalCompletion && _iterator.return != null) {
                    _iterator.return();
                }
            } finally{
                if (_didIteratorError) {
                    throw _iteratorError;
                }
            }
        }
        if (src) {
            set.push("".concat(src, " ").concat(dppxModifiersMap[densityBucket], "x"));
        }
        return set;
    }, []).join(', ');
    return /*#__PURE__*/ _react.default.createElement("img", _object_spread._({
        ref: getRootRef,
        "aria-hidden": "true",
        alt: "",
        className: [
            'vkuiIcon',
            "vkuiIcon--".concat(size),
            "vkuiIcon--w-".concat(size),
            "vkuiIcon--h-".concat(size),
            "vkuiIcon--".concat(id),
            'vkuiRasterIcon',
            className
        ].join(' ').trim(),
        width: size,
        height: size,
        srcSet: srcSet,
        loading: "lazy",
        draggable: false
    }, restProps));
});
function makeRasterIcon(componentName, id, size, densityBucketAppearanceSet) {
    var Icon = function(props) {
        return /*#__PURE__*/ _react.default.createElement(RasterIcon, _object_spread._({
            id: id,
            size: size
        }, densityBucketAppearanceSet, props));
    };
    Icon.size = size;
    Icon.isRasterIcon = true;
    Icon.displayName = componentName;
    return Icon;
} /*#__PURE__*/ 

//# sourceMappingURL=RasterIcon.js.map