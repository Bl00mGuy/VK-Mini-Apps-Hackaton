{"version":3,"sources":["../../../src/datetime/date.ts"],"sourcesContent":["import { leadingZero } from '../other/numbers';\nimport { isDateToday } from './isDateToday';\n\nexport const SECONDS_IN_THE_DAY = 86400;\nconst MILLISECONDS_IN_THE_DAY = SECONDS_IN_THE_DAY * 1000;\n\n/**\n * Проверяет, что переданная дата - вчерашний день\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { isDateYesterday } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(isDateYesterday(new Date(), false);\n * ```\n */\nexport function isDateYesterday(date: Date): boolean {\n  const yesterdayDate = new Date(date.getTime() + MILLISECONDS_IN_THE_DAY);\n  return isDateToday(yesterdayDate);\n}\n\n/**\n * Проверяет, что переданная дата - завтрашний день\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { isDateTomorrow } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(isDateTomorrow(new Date(), false);\n * ```\n */\nexport function isDateTomorrow(date: Date): boolean {\n  const tomorrowDate = new Date(date.getTime() - MILLISECONDS_IN_THE_DAY);\n  return isDateToday(tomorrowDate);\n}\n\n/**\n * Возвращает новую дату — начало переданного дня\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { getBeginningOfDay } from '@vkontakte/vkjs';\n *\n * assert.deepStrictEqual(\n *   getBeginningOfDay(new Date(2024, 0, 1, 12, 34, 56, 789)),\n *   new Date(2024, 0, 1),\n * );\n * ```\n *\n * @param date Дата\n */\nexport function getBeginningOfDay(date: Date) {\n  const year = date.getFullYear();\n  const month = date.getMonth();\n  const day = date.getDate();\n\n  return new Date(year, month, day, 0, 0, 0, 0);\n}\n\n/**\n * Возвращает true, если год високосный\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { isLeapYear } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(isLeapYear(2024), true);\n * assert.strictEqual(isLeapYear(2025), false);\n * ```\n *\n * @param year Год\n */\nexport function isLeapYear(year: number) {\n  return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\n\n/**\n * Возвращает кол-во дней в месяце (последнее число месяца)\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { getLastDayOfMonth } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(getLastDayOfMonth(2024, 2), 29);\n * assert.strictEqual(getLastDayOfMonth(2025, 2), 28);\n * ```\n *\n * @param year Год\n * @param month Месяц\n */\nexport function getLastDayOfMonth(year: number, month: number): number {\n  if (+month === 2) {\n    return isLeapYear(year) ? 29 : 28;\n  } else if (month > 0 && ((month < 8 && month % 2 === 0) || (month > 7 && month % 2 === 1))) {\n    return 30;\n  }\n  return 31;\n}\n\n/**\n * Ближайший понедельник в прошлом относительно date\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { getStartOfWeek } from '@vkontakte/vkjs';\n *\n * assert.deepStrictEqual(\n *   getStartOfWeek(new Date(2024, 0, 1), 10),\n *   new Date(2024, 11, 31),\n * );\n * ```\n *\n * @param date Дата\n */\nexport function getStartOfWeek(date: Date): Date {\n  const weekDay = date.getDay();\n  if (weekDay === 0) {\n    return addDays(date, -6);\n  }\n  return addDays(date, -weekDay + 1);\n}\n\n/**\n * Добавляет дни к дате и возвращает новый объект\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { addDays } from '@vkontakte/vkjs';\n *\n * assert.deepStrictEqual(\n *   addDays(new Date(2024, 0, 1), 10),\n *   new Date(2024, 0, 11),\n * );\n * ```\n *\n * @param date Дата\n * @param dayCount Количество дней, которые требуется добавить\n */\nexport function addDays(date: Date, dayCount: number): Date {\n  const modified = new Date(date.getTime());\n  modified.setDate(modified.getDate() + dayCount);\n  return modified;\n}\n\n/**\n * Создаёт дату из Unix Timestamp\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { createDateFromUnixTimestamp } from '@vkontakte/vkjs';\n *\n * assert.deepStrictEqual(\n *   createDateFromUnixTimestamp(1704056400),\n *   new Date(2024, 0, 1),\n * );\n * ```\n *\n * @param timestamp Дата в формате unix timestamp (секунды)\n */\nexport function createDateFromUnixTimestamp(timestamp: number): Date {\n  return new Date(timestamp * 1000);\n}\n\n/**\n * Возвращает Unix Timestamp из даты\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { getUnixTimestampFromDate } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(\n *   getUnixTimestampFromDate(new Date(2024, 0, 1)),\n *   1704056400,\n * );\n * ```\n *\n * @param date Дата, которую требуется перевести в Unix Timestamp\n */\nexport function getUnixTimestampFromDate(date: Date): number {\n  return Math.floor(date.getTime() / 1000);\n}\n\n/**\n * Возвращает дату в формате YYYY-MM-DD\n *\n * @example\n * ```ts\n * import assert from 'node:assert';\n * import { convertDateToInputFormat } from '@vkontakte/vkjs';\n *\n * assert.strictEqual(\n *   convertDateToInputFormat(new Date(2024, 0, 1)),\n *   \"2024-01-01\",\n * );\n * ```\n *\n * @param date Дата, которую требуется отформатировать\n */\nexport function convertDateToInputFormat(date: Date): string {\n  const day = date.getDate();\n  const month = date.getMonth() + 1;\n  const year = date.getFullYear();\n\n  return [year, leadingZero(month), leadingZero(day)].join('-');\n}\n"],"names":["leadingZero","isDateToday","SECONDS_IN_THE_DAY","MILLISECONDS_IN_THE_DAY","isDateYesterday","date","yesterdayDate","Date","getTime","isDateTomorrow","tomorrowDate","getBeginningOfDay","year","getFullYear","month","getMonth","day","getDate","isLeapYear","getLastDayOfMonth","getStartOfWeek","weekDay","getDay","addDays","dayCount","modified","setDate","createDateFromUnixTimestamp","timestamp","getUnixTimestampFromDate","Math","floor","convertDateToInputFormat","join"],"mappings":"AAAA,SAASA,WAAW,QAAQ,mBAAmB;AAC/C,SAASC,WAAW,QAAQ,gBAAgB;AAE5C,OAAO,IAAMC,qBAAqB,MAAM;AACxC,IAAMC,0BAA0BD,qBAAqB;AAErD;;;;;;;;;;CAUC,GACD,OAAO,SAASE,gBAAgBC,IAAU;IACxC,IAAMC,gBAAgB,IAAIC,KAAKF,KAAKG,OAAO,KAAKL;IAChD,OAAOF,YAAYK;AACrB;AAEA;;;;;;;;;;CAUC,GACD,OAAO,SAASG,eAAeJ,IAAU;IACvC,IAAMK,eAAe,IAAIH,KAAKF,KAAKG,OAAO,KAAKL;IAC/C,OAAOF,YAAYS;AACrB;AAEA;;;;;;;;;;;;;;;CAeC,GACD,OAAO,SAASC,kBAAkBN,IAAU;IAC1C,IAAMO,OAAOP,KAAKQ,WAAW;IAC7B,IAAMC,QAAQT,KAAKU,QAAQ;IAC3B,IAAMC,MAAMX,KAAKY,OAAO;IAExB,OAAO,IAAIV,KAAKK,MAAME,OAAOE,KAAK,GAAG,GAAG,GAAG;AAC7C;AAEA;;;;;;;;;;;;;CAaC,GACD,OAAO,SAASE,WAAWN,IAAY;IACrC,OAAO,AAACA,OAAO,MAAM,KAAKA,OAAO,QAAQ,KAAMA,OAAO,QAAQ;AAChE;AAEA;;;;;;;;;;;;;;CAcC,GACD,OAAO,SAASO,kBAAkBP,IAAY,EAAEE,KAAa;IAC3D,IAAI,CAACA,UAAU,GAAG;QAChB,OAAOI,WAAWN,QAAQ,KAAK;IACjC,OAAO,IAAIE,QAAQ,KAAM,CAAA,AAACA,QAAQ,KAAKA,QAAQ,MAAM,KAAOA,QAAQ,KAAKA,QAAQ,MAAM,CAAC,GAAI;QAC1F,OAAO;IACT;IACA,OAAO;AACT;AAEA;;;;;;;;;;;;;;;CAeC,GACD,OAAO,SAASM,eAAef,IAAU;IACvC,IAAMgB,UAAUhB,KAAKiB,MAAM;IAC3B,IAAID,YAAY,GAAG;QACjB,OAAOE,QAAQlB,MAAM,CAAC;IACxB;IACA,OAAOkB,QAAQlB,MAAM,CAACgB,UAAU;AAClC;AAEA;;;;;;;;;;;;;;;;CAgBC,GACD,OAAO,SAASE,QAAQlB,IAAU,EAAEmB,QAAgB;IAClD,IAAMC,WAAW,IAAIlB,KAAKF,KAAKG,OAAO;IACtCiB,SAASC,OAAO,CAACD,SAASR,OAAO,KAAKO;IACtC,OAAOC;AACT;AAEA;;;;;;;;;;;;;;;CAeC,GACD,OAAO,SAASE,4BAA4BC,SAAiB;IAC3D,OAAO,IAAIrB,KAAKqB,YAAY;AAC9B;AAEA;;;;;;;;;;;;;;;CAeC,GACD,OAAO,SAASC,yBAAyBxB,IAAU;IACjD,OAAOyB,KAAKC,KAAK,CAAC1B,KAAKG,OAAO,KAAK;AACrC;AAEA;;;;;;;;;;;;;;;CAeC,GACD,OAAO,SAASwB,yBAAyB3B,IAAU;IACjD,IAAMW,MAAMX,KAAKY,OAAO;IACxB,IAAMH,QAAQT,KAAKU,QAAQ,KAAK;IAChC,IAAMH,OAAOP,KAAKQ,WAAW;IAE7B,OAAO;QAACD;QAAMZ,YAAYc;QAAQd,YAAYgB;KAAK,CAACiB,IAAI,CAAC;AAC3D"}