{"version":3,"sources":["../../../../src/lib/animation/useReducedMotion.ts"],"sourcesContent":["/* eslint-disable no-restricted-properties */\nimport * as React from 'react';\nimport { useDOM } from '../dom';\nimport { matchMediaListAddListener, matchMediaListRemoveListener } from '../matchMedia';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\n\nexport const REDUCE_MOTION_MEDIA_QUERY = 'screen and (prefers-reduced-motion: reduce)';\n\nexport const useReducedMotion = (): boolean => {\n  const { window } = useDOM();\n  const initial = React.useMemo(\n    () =>\n      window\n        ? window.matchMedia(REDUCE_MOTION_MEDIA_QUERY).matches\n        : /* istanbul ignore next: на текущий момент, покрытие данного кейса неинтересно  */\n          false,\n    [window],\n  );\n  const reducedMotion = React.useRef(initial);\n\n  useIsomorphicLayoutEffect(() => {\n    /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n    if (!window) {\n      return;\n    }\n    const match = window.matchMedia(REDUCE_MOTION_MEDIA_QUERY);\n    reducedMotion.current = match.matches;\n    /* istanbul ignore next: на текущий момент, покрытие данного кейса неинтересно  */\n    const handleMediaQueryChange = (event: MediaQueryListEvent) => {\n      /* istanbul ignore next */\n      reducedMotion.current = event.matches;\n    };\n    matchMediaListAddListener(match, handleMediaQueryChange);\n    return () => matchMediaListRemoveListener(match, handleMediaQueryChange);\n  }, [window]);\n\n  return reducedMotion.current;\n};\n"],"names":["REDUCE_MOTION_MEDIA_QUERY","useReducedMotion","window","useDOM","initial","React","useMemo","matchMedia","matches","reducedMotion","useRef","useIsomorphicLayoutEffect","match","current","handleMediaQueryChange","event","matchMediaListAddListener","matchMediaListRemoveListener"],"mappings":"AAAA,2CAA2C;;;;;;;;;;;IAM9BA,yBAAyB;eAAzBA;;IAEAC,gBAAgB;eAAhBA;;;;iEAPU;qBACA;4BACiD;2CAC9B;AAEnC,MAAMD,4BAA4B;AAElC,MAAMC,mBAAmB;IAC9B,MAAM,EAAEC,MAAM,EAAE,GAAGC,IAAAA,WAAM;IACzB,MAAMC,UAAUC,OAAMC,OAAO,CAC3B,IACEJ,SACIA,OAAOK,UAAU,CAACP,2BAA2BQ,OAAO,GACpD,gFAAgF,GAChF,OACN;QAACN;KAAO;IAEV,MAAMO,gBAAgBJ,OAAMK,MAAM,CAACN;IAEnCO,IAAAA,oDAAyB,EAAC;QACxB,6EAA6E,GAC7E,IAAI,CAACT,QAAQ;YACX;QACF;QACA,MAAMU,QAAQV,OAAOK,UAAU,CAACP;QAChCS,cAAcI,OAAO,GAAGD,MAAMJ,OAAO;QACrC,gFAAgF,GAChF,MAAMM,yBAAyB,CAACC;YAC9B,wBAAwB,GACxBN,cAAcI,OAAO,GAAGE,MAAMP,OAAO;QACvC;QACAQ,IAAAA,qCAAyB,EAACJ,OAAOE;QACjC,OAAO,IAAMG,IAAAA,wCAA4B,EAACL,OAAOE;IACnD,GAAG;QAACZ;KAAO;IAEX,OAAOO,cAAcI,OAAO;AAC9B"}