{"version":3,"sources":["../../../../src/components/CalendarTime/CalendarTime.tsx"],"sourcesContent":["import * as React from 'react';\nimport { setHours, setMinutes } from 'date-fns';\nimport { AdaptivityProvider } from '../AdaptivityProvider/AdaptivityProvider';\nimport { Button } from '../Button/Button';\nimport { CustomSelect } from '../CustomSelect/CustomSelect';\nimport styles from './CalendarTime.module.css';\n\nexport interface CalendarTimeProps {\n  value: Date;\n  doneButtonText?: string;\n  changeHoursLabel?: string;\n  changeMinutesLabel?: string;\n  onChange?: (value: Date) => void;\n  onClose?: () => void;\n  isDayDisabled?: (day: Date, withTime?: boolean) => boolean;\n}\n\nconst hours: Array<{\n  value: number;\n  label: string;\n}> = [];\nfor (let i = 0; i < 24; i += 1) {\n  hours.push({ value: i, label: String(i).padStart(2, '0') });\n}\n\nconst minutes: Array<{\n  value: number;\n  label: string;\n}> = [];\nfor (let i = 0; i < 60; i += 1) {\n  minutes.push({ value: i, label: String(i).padStart(2, '0') });\n}\n\nexport const CalendarTime = ({\n  value,\n  doneButtonText = 'Готово',\n  onChange,\n  onClose,\n  changeHoursLabel,\n  changeMinutesLabel,\n  isDayDisabled,\n}: CalendarTimeProps): React.ReactNode => {\n  const localHours = isDayDisabled\n    ? hours.map((hour) => {\n        return { ...hour, disabled: isDayDisabled(setHours(value, hour.value), true) };\n      })\n    : hours;\n\n  const localMinutes = isDayDisabled\n    ? minutes.map((minute) => {\n        return { ...minute, disabled: isDayDisabled(setMinutes(value, minute.value), true) };\n      })\n    : minutes;\n\n  const onHoursChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange?.(setHours(value, Number(event.target.value))),\n    [onChange, value],\n  );\n  const onMinutesChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange?.(setMinutes(value, Number(event.target.value))),\n    [onChange, value],\n  );\n\n  return (\n    <div className={styles['CalendarTime']}>\n      <div className={styles['CalendarTime__picker']}>\n        <AdaptivityProvider sizeY=\"compact\">\n          <CustomSelect\n            value={value.getHours()}\n            options={localHours}\n            onChange={onHoursChange}\n            forceDropdownPortal={false}\n            aria-label={changeHoursLabel}\n          />\n        </AdaptivityProvider>\n      </div>\n      <div className={styles['CalendarTime__divider']}>:</div>\n      <div className={styles['CalendarTime__picker']}>\n        <AdaptivityProvider sizeY=\"compact\">\n          <CustomSelect\n            value={value.getMinutes()}\n            options={localMinutes}\n            onChange={onMinutesChange}\n            forceDropdownPortal={false}\n            aria-label={changeMinutesLabel}\n          />\n        </AdaptivityProvider>\n      </div>\n      <div className={styles['CalendarTime__button']}>\n        <AdaptivityProvider sizeY=\"compact\">\n          <Button mode=\"secondary\" onClick={onClose} size=\"l\">\n            {doneButtonText}\n          </Button>\n        </AdaptivityProvider>\n      </div>\n    </div>\n  );\n};\n"],"names":["CalendarTime","hours","i","push","value","label","String","padStart","minutes","doneButtonText","onChange","onClose","changeHoursLabel","changeMinutesLabel","isDayDisabled","localHours","map","hour","disabled","setHours","localMinutes","minute","setMinutes","onHoursChange","React","useCallback","event","Number","target","onMinutesChange","div","className","AdaptivityProvider","sizeY","CustomSelect","getHours","options","forceDropdownPortal","aria-label","getMinutes","Button","mode","onClick","size"],"mappings":";;;;+BAiCaA;;;eAAAA;;;;;;;iEAjCU;yBACc;oCACF;wBACZ;8BACM;AAa7B,MAAMC,QAGD,EAAE;AACP,IAAK,IAAIC,IAAI,GAAGA,IAAI,IAAIA,KAAK,EAAG;IAC9BD,MAAME,IAAI,CAAC;QAAEC,OAAOF;QAAGG,OAAOC,OAAOJ,GAAGK,QAAQ,CAAC,GAAG;IAAK;AAC3D;AAEA,MAAMC,UAGD,EAAE;AACP,IAAK,IAAIN,IAAI,GAAGA,IAAI,IAAIA,KAAK,EAAG;IAC9BM,QAAQL,IAAI,CAAC;QAAEC,OAAOF;QAAGG,OAAOC,OAAOJ,GAAGK,QAAQ,CAAC,GAAG;IAAK;AAC7D;AAEO,MAAMP,eAAe,CAAC,EAC3BI,KAAK,EACLK,iBAAiB,QAAQ,EACzBC,QAAQ,EACRC,OAAO,EACPC,gBAAgB,EAChBC,kBAAkB,EAClBC,aAAa,EACK;IAClB,MAAMC,aAAaD,gBACfb,MAAMe,GAAG,CAAC,CAACC;QACT,OAAO,4CAAKA;YAAMC,UAAUJ,cAAcK,IAAAA,iBAAQ,EAACf,OAAOa,KAAKb,KAAK,GAAG;;IACzE,KACAH;IAEJ,MAAMmB,eAAeN,gBACjBN,QAAQQ,GAAG,CAAC,CAACK;QACX,OAAO,4CAAKA;YAAQH,UAAUJ,cAAcQ,IAAAA,mBAAU,EAAClB,OAAOiB,OAAOjB,KAAK,GAAG;;IAC/E,KACAI;IAEJ,MAAMe,gBAAgBC,OAAMC,WAAW,CACrC,CAACC,QACChB,qBAAAA,+BAAAA,SAAWS,IAAAA,iBAAQ,EAACf,OAAOuB,OAAOD,MAAME,MAAM,CAACxB,KAAK,KACtD;QAACM;QAAUN;KAAM;IAEnB,MAAMyB,kBAAkBL,OAAMC,WAAW,CACvC,CAACC,QACChB,qBAAAA,+BAAAA,SAAWY,IAAAA,mBAAU,EAAClB,OAAOuB,OAAOD,MAAME,MAAM,CAACxB,KAAK,KACxD;QAACM;QAAUN;KAAM;IAGnB,qBACE,sBAAC0B;QAAIC,SAAS;;0BACZ,qBAACD;gBAAIC,SAAS;0BACZ,cAAA,qBAACC,sCAAkB;oBAACC,OAAM;8BACxB,cAAA,qBAACC,0BAAY;wBACX9B,OAAOA,MAAM+B,QAAQ;wBACrBC,SAASrB;wBACTL,UAAUa;wBACVc,qBAAqB;wBACrBC,cAAY1B;;;;0BAIlB,qBAACkB;gBAAIC,SAAS;0BAAmC;;0BACjD,qBAACD;gBAAIC,SAAS;0BACZ,cAAA,qBAACC,sCAAkB;oBAACC,OAAM;8BACxB,cAAA,qBAACC,0BAAY;wBACX9B,OAAOA,MAAMmC,UAAU;wBACvBH,SAAShB;wBACTV,UAAUmB;wBACVQ,qBAAqB;wBACrBC,cAAYzB;;;;0BAIlB,qBAACiB;gBAAIC,SAAS;0BACZ,cAAA,qBAACC,sCAAkB;oBAACC,OAAM;8BACxB,cAAA,qBAACO,cAAM;wBAACC,MAAK;wBAAYC,SAAS/B;wBAASgC,MAAK;kCAC7ClC;;;;;;AAMb"}