{"version":3,"sources":["../../../../src/components/Gallery/hooks.ts"],"sourcesContent":["import * as React from 'react';\nimport { useStableCallback } from '../../hooks/useStableCallback';\nimport { useDOM } from '../../lib/dom';\nimport type { TimeoutId } from '../../types';\n\nexport function useAutoPlay(\n  timeout: number,\n  slideIndex: number,\n  callbackFnProp: VoidFunction,\n): void {\n  const { document } = useDOM();\n  const callbackFn = useStableCallback(callbackFnProp);\n\n  React.useEffect(\n    function initializeAutoPlay() {\n      if (!document || !timeout) {\n        return;\n      }\n\n      let timeoutId: TimeoutId = null;\n\n      const stop = () => {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n          timeoutId = null;\n        }\n      };\n\n      const start = () => {\n        switch (document.visibilityState) {\n          case 'visible':\n            stop();\n            timeoutId = setTimeout(callbackFn, timeout);\n            break;\n          case 'hidden':\n            stop();\n        }\n      };\n\n      start();\n\n      document.addEventListener('visibilitychange', start);\n\n      return () => {\n        stop();\n        document.removeEventListener('visibilitychange', start);\n      };\n    },\n    [document, timeout, slideIndex, callbackFn],\n  );\n}\n"],"names":["useAutoPlay","timeout","slideIndex","callbackFnProp","document","useDOM","callbackFn","useStableCallback","React","useEffect","initializeAutoPlay","timeoutId","stop","clearTimeout","start","visibilityState","setTimeout","addEventListener","removeEventListener"],"mappings":";;;;+BAKgBA;;;eAAAA;;;;iEALO;mCACW;qBACX;AAGhB,SAASA,YACdC,OAAe,EACfC,UAAkB,EAClBC,cAA4B;IAE5B,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,WAAM;IAC3B,MAAMC,aAAaC,IAAAA,oCAAiB,EAACJ;IAErCK,OAAMC,SAAS,CACb,SAASC;QACP,IAAI,CAACN,YAAY,CAACH,SAAS;YACzB;QACF;QAEA,IAAIU,YAAuB;QAE3B,MAAMC,OAAO;YACX,IAAID,WAAW;gBACbE,aAAaF;gBACbA,YAAY;YACd;QACF;QAEA,MAAMG,QAAQ;YACZ,OAAQV,SAASW,eAAe;gBAC9B,KAAK;oBACHH;oBACAD,YAAYK,WAAWV,YAAYL;oBACnC;gBACF,KAAK;oBACHW;YACJ;QACF;QAEAE;QAEAV,SAASa,gBAAgB,CAAC,oBAAoBH;QAE9C,OAAO;YACLF;YACAR,SAASc,mBAAmB,CAAC,oBAAoBJ;QACnD;IACF,GACA;QAACV;QAAUH;QAASC;QAAYI;KAAW;AAE/C"}