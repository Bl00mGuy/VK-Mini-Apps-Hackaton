{"version":3,"sources":["../../../../src/components/ActionSheetItem/ActionSheetItem.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, noop } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Keys, pressedKey } from '../../lib/accessibility';\nimport { ActionSheetContext, type ActionSheetContextType } from '../ActionSheet/ActionSheetContext';\nimport { Tappable } from '../Tappable/Tappable';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Text } from '../Typography/Text/Text';\nimport { Title } from '../Typography/Title/Title';\nimport { isRealClickEvent } from './helpers';\nimport { Radio } from './subcomponents/Radio/Radio';\nimport styles from './ActionSheetItem.module.css';\n\nexport interface ActionSheetItemProps\n  extends React.HTMLAttributes<HTMLElement>,\n    React.AnchorHTMLAttributes<HTMLElement>,\n    Pick<React.InputHTMLAttributes<HTMLInputElement>, 'name' | 'checked' | 'value'> {\n  mode?: 'default' | 'destructive' | 'cancel';\n  before?: React.ReactNode;\n  after?: React.ReactNode;\n  meta?: React.ReactNode;\n  subtitle?: React.ReactNode;\n  /**\n   * По умолчанию клик на опцию вызывает переданную в `ActionSheet` функцию `onClose`, данное свойство\n   * позволяет отключить такое поведение\n   */\n  autoCloseDisabled?: boolean;\n  selectable?: boolean;\n  disabled?: boolean;\n  /**\n   * Все текстовые элементы при необходимости занимают несколько строк\n   */\n  multiline?: boolean;\n  /**\n   * По умолчанию onClick будет вызван после завершения анимации скрытия и после вызова onClose.\n   * Из этого следует, что в объекте события значения полей типа `currentTarget` будут не определены.\n   * Если вам нужен объект события именно на момент клика, используйте `onImmediateClick`.\n   */\n  onClick?: React.MouseEventHandler<HTMLElement>;\n  onImmediateClick?: React.MouseEventHandler<HTMLElement>;\n  /**\n   * Иконка для `checked` режима.\n   */\n  iconChecked?: React.ReactNode;\n  /**\n   * Позволяет отделить ActionItem от CancelItem для определении того,\n   * кто вызвал закрытие ActionSheet. Используется в ActionSheet.onClose()\n   */\n  isCancelItem?: boolean;\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ActionSheetItem\n */\nexport const ActionSheetItem = ({\n  children,\n  autoCloseDisabled = false,\n  mode = 'default',\n  meta,\n  subtitle,\n  before,\n  after,\n  selectable,\n  value,\n  name,\n  checked,\n  defaultChecked,\n  onChange,\n  onClick,\n  onImmediateClick,\n  multiline = false,\n  iconChecked,\n  className,\n  isCancelItem,\n  ...restProps\n}: ActionSheetItemProps): React.ReactNode => {\n  const platform = usePlatform();\n  const {\n    onItemClick = () => noop,\n    mode: actionSheetMode,\n    onClose: onActionSheetClose,\n  } = React.useContext<ActionSheetContextType<HTMLElement>>(ActionSheetContext);\n  const { sizeY } = useAdaptivityWithJSMediaQueries();\n\n  const Component: React.ElementType | undefined = selectable ? 'label' : undefined;\n\n  const isRich = subtitle || meta || selectable;\n  const isCentered = !isRich && !before && platform === 'ios';\n\n  const onItemClickHandler = React.useCallback(\n    (e: React.MouseEvent) => {\n      onItemClick({\n        action: onClick,\n        immediateAction: onImmediateClick,\n        autoClose: !autoCloseDisabled,\n        isCancelItem: Boolean(isCancelItem),\n      })?.(e);\n    },\n    [autoCloseDisabled, isCancelItem, onClick, onImmediateClick, onItemClick],\n  );\n\n  const onKeyDown: React.KeyboardEventHandler<HTMLElement> = React.useCallback(\n    (event) => {\n      if (pressedKey(event) === Keys.ENTER) {\n        onActionSheetClose?.();\n      }\n    },\n    [onActionSheetClose],\n  );\n\n  const onItemClickImpl: React.MouseEventHandler<HTMLElement> = React.useCallback(\n    (event) => {\n      if (selectable) {\n        if (isRealClickEvent(event)) {\n          onItemClickHandler(event);\n        }\n      } else {\n        onItemClickHandler(event);\n      }\n    },\n    [onItemClickHandler, selectable],\n  );\n\n  return (\n    <Tappable\n      {...(Component && { Component })}\n      {...restProps}\n      onClick={onItemClickImpl}\n      activeMode={platform === 'ios' ? styles['ActionSheetItem--active'] : undefined}\n      className={classNames(\n        styles['ActionSheetItem'],\n        platform === 'ios' && styles['ActionSheetItem--ios'],\n        mode === 'cancel' && styles['ActionSheetItem--mode-cancel'],\n        mode === 'destructive' && styles['ActionSheetItem--mode-destructive'],\n        sizeY === 'compact' && styles['ActionSheetItem--sizeY-compact'],\n        isRich && styles['ActionSheetItem--rich'],\n        actionSheetMode === 'menu' && styles['ActionSheetItem--menu'],\n        selectable && styles['ActionSheetItem--selectable'],\n        className,\n      )}\n      onKeyDown={onKeyDown}\n    >\n      {before && <div className={styles['ActionSheetItem__before']}>{before}</div>}\n      <div\n        className={classNames(\n          styles['ActionSheetItem__container'],\n          !multiline && styles['ActionSheetItem--ellipsis'],\n        )}\n      >\n        <div\n          className={classNames(\n            styles['ActionSheetItem__content'],\n            isCentered && styles['ActionSheetItem--centered'],\n          )}\n        >\n          {platform === 'ios' ? (\n            <Title\n              className={styles['ActionSheetItem__children']}\n              weight={mode === 'cancel' ? '2' : '3'}\n              level={isCentered ? '2' : '3'}\n            >\n              {children}\n            </Title>\n          ) : (\n            <Text className={styles['ActionSheetItem__children']}>{children}</Text>\n          )}\n          {meta && <Text className={styles['ActionSheetItem__meta']}>{meta}</Text>}\n        </div>\n        {subtitle && <Subhead className={styles['ActionSheetItem__subtitle']}>{subtitle}</Subhead>}\n      </div>\n      {(selectable || after) && (\n        <div className={styles['ActionSheetItem__after']}>\n          {after}\n          {selectable && (\n            <Radio\n              name={name}\n              value={value}\n              onChange={onChange}\n              defaultChecked={defaultChecked}\n              checked={checked}\n              disabled={restProps.disabled}\n            >\n              {iconChecked}\n            </Radio>\n          )}\n        </div>\n      )}\n    </Tappable>\n  );\n};\n"],"names":["ActionSheetItem","children","autoCloseDisabled","mode","meta","subtitle","before","after","selectable","value","name","checked","defaultChecked","onChange","onClick","onImmediateClick","multiline","iconChecked","className","isCancelItem","restProps","platform","usePlatform","onItemClick","noop","actionSheetMode","onClose","onActionSheetClose","React","useContext","ActionSheetContext","sizeY","useAdaptivityWithJSMediaQueries","Component","undefined","isRich","isCentered","onItemClickHandler","useCallback","e","action","immediateAction","autoClose","Boolean","onKeyDown","event","pressedKey","Keys","ENTER","onItemClickImpl","isRealClickEvent","Tappable","activeMode","classNames","div","Title","weight","level","Text","Subhead","Radio","disabled"],"mappings":"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"}