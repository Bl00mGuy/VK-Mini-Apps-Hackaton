{"version":3,"sources":["../../../../src/components/CustomScrollView/useDragAndDrop.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useDOM } from '../../lib/dom';\n\nexport const useDragAndDrop = (\n  onDragStart: (e: React.MouseEvent) => void,\n  onDragMove: (e: React.MouseEvent) => void,\n  onDragEnd: (e: React.MouseEvent) => void,\n) => {\n  const { document } = useDOM();\n  const [isPressed, setIsPressed] = React.useState(false);\n\n  const onDragEndImpl = (e: React.MouseEvent) => {\n    if (!isPressed) {\n      return;\n    }\n    e.preventDefault();\n    onDragEnd(e);\n    unsubscribe();\n  };\n\n  const onDragMoveImpl = (e: React.MouseEvent) => {\n    if (!isPressed) {\n      return;\n    }\n    e.preventDefault();\n    onDragMove(e);\n  };\n\n  const listeners = [\n    // @ts-expect-error: TS2769 ругается на тип event\n    useEventListener('mousemove', onDragMoveImpl),\n    // @ts-expect-error: TS2769 ругается на тип event\n    useEventListener('mouseup', onDragEndImpl),\n  ];\n\n  function subscribe(el: Document | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  return {\n    onDragStart: (e: React.MouseEvent) => {\n      e.preventDefault();\n      setIsPressed(true);\n      onDragStart(e);\n      subscribe(document);\n    },\n  };\n};\n"],"names":["useDragAndDrop","onDragStart","onDragMove","onDragEnd","document","useDOM","isPressed","setIsPressed","React","useState","onDragEndImpl","e","preventDefault","unsubscribe","onDragMoveImpl","listeners","useEventListener","subscribe","el","forEach","l","add","remove"],"mappings":";;;;+BAIaA;;;eAAAA;;;;iEAJU;kCACU;qBACV;AAEhB,MAAMA,iBAAiB,CAC5BC,aACAC,YACAC;IAEA,MAAM,EAAEC,QAAQ,EAAE,GAAGC,IAAAA,WAAM;IAC3B,MAAM,CAACC,WAAWC,aAAa,GAAGC,OAAMC,QAAQ,CAAC;IAEjD,MAAMC,gBAAgB,CAACC;QACrB,IAAI,CAACL,WAAW;YACd;QACF;QACAK,EAAEC,cAAc;QAChBT,UAAUQ;QACVE;IACF;IAEA,MAAMC,iBAAiB,CAACH;QACtB,IAAI,CAACL,WAAW;YACd;QACF;QACAK,EAAEC,cAAc;QAChBV,WAAWS;IACb;IAEA,MAAMI,YAAY;QAChB,iDAAiD;QACjDC,IAAAA,kCAAgB,EAAC,aAAaF;QAC9B,iDAAiD;QACjDE,IAAAA,kCAAgB,EAAC,WAAWN;KAC7B;IAED,SAASO,UAAUC,EAAwB;QACzC,IAAIA,IAAI;YACNH,UAAUI,OAAO,CAAC,CAACC,IAAMA,EAAEC,GAAG,CAACH;QACjC;IACF;IAEA,SAASL;QACPE,UAAUI,OAAO,CAAC,CAACC,IAAMA,EAAEE,MAAM;IACnC;IAEA,OAAO;QACLrB,aAAa,CAACU;YACZA,EAAEC,cAAc;YAChBL,aAAa;YACbN,YAAYU;YACZM,UAAUb;QACZ;IACF;AACF"}