{"version":3,"sources":["../../../src/components/CustomScrollView/useDragAndDrop.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useEventListener } from '../../hooks/useEventListener';\nimport { useDOM } from '../../lib/dom';\n\nexport const useDragAndDrop = (\n  onDragStart: (e: React.MouseEvent) => void,\n  onDragMove: (e: React.MouseEvent) => void,\n  onDragEnd: (e: React.MouseEvent) => void,\n) => {\n  const { document } = useDOM();\n  const [isPressed, setIsPressed] = React.useState(false);\n\n  const onDragEndImpl = (e: React.MouseEvent) => {\n    if (!isPressed) {\n      return;\n    }\n    e.preventDefault();\n    onDragEnd(e);\n    unsubscribe();\n  };\n\n  const onDragMoveImpl = (e: React.MouseEvent) => {\n    if (!isPressed) {\n      return;\n    }\n    e.preventDefault();\n    onDragMove(e);\n  };\n\n  const listeners = [\n    // @ts-expect-error: TS2769 ругается на тип event\n    useEventListener('mousemove', onDragMoveImpl),\n    // @ts-expect-error: TS2769 ругается на тип event\n    useEventListener('mouseup', onDragEndImpl),\n  ];\n\n  function subscribe(el: Document | undefined) {\n    if (el) {\n      listeners.forEach((l) => l.add(el));\n    }\n  }\n\n  function unsubscribe() {\n    listeners.forEach((l) => l.remove());\n  }\n\n  return {\n    onDragStart: (e: React.MouseEvent) => {\n      e.preventDefault();\n      setIsPressed(true);\n      onDragStart(e);\n      subscribe(document);\n    },\n  };\n};\n"],"names":["React","useEventListener","useDOM","useDragAndDrop","onDragStart","onDragMove","onDragEnd","document","isPressed","setIsPressed","useState","onDragEndImpl","e","preventDefault","unsubscribe","onDragMoveImpl","listeners","subscribe","el","forEach","l","add","remove"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,gBAAgB,QAAQ,+BAA+B;AAChE,SAASC,MAAM,QAAQ,gBAAgB;AAEvC,OAAO,MAAMC,iBAAiB,CAC5BC,aACAC,YACAC;IAEA,MAAM,EAAEC,QAAQ,EAAE,GAAGL;IACrB,MAAM,CAACM,WAAWC,aAAa,GAAGT,MAAMU,QAAQ,CAAC;IAEjD,MAAMC,gBAAgB,CAACC;QACrB,IAAI,CAACJ,WAAW;YACd;QACF;QACAI,EAAEC,cAAc;QAChBP,UAAUM;QACVE;IACF;IAEA,MAAMC,iBAAiB,CAACH;QACtB,IAAI,CAACJ,WAAW;YACd;QACF;QACAI,EAAEC,cAAc;QAChBR,WAAWO;IACb;IAEA,MAAMI,YAAY;QAChB,iDAAiD;QACjDf,iBAAiB,aAAac;QAC9B,iDAAiD;QACjDd,iBAAiB,WAAWU;KAC7B;IAED,SAASM,UAAUC,EAAwB;QACzC,IAAIA,IAAI;YACNF,UAAUG,OAAO,CAAC,CAACC,IAAMA,EAAEC,GAAG,CAACH;QACjC;IACF;IAEA,SAASJ;QACPE,UAAUG,OAAO,CAAC,CAACC,IAAMA,EAAEE,MAAM;IACnC;IAEA,OAAO;QACLlB,aAAa,CAACQ;YACZA,EAAEC,cAAc;YAChBJ,aAAa;YACbL,YAAYQ;YACZK,UAAUV;QACZ;IACF;AACF,EAAE"}