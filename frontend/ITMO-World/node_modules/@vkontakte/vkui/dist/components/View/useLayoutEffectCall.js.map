{"version":3,"sources":["../../../src/components/View/useLayoutEffectCall.tsx"],"sourcesContent":["import * as React from 'react';\nimport { useIsomorphicLayoutEffect } from '../../lib/useIsomorphicLayoutEffect';\n\nclass LayoutEffectCall {\n  #fns: Array<() => void> = [];\n\n  /**\n   * Выполняет переданные функции\n   */\n  run() {\n    for (const fn of this.#fns) {\n      fn();\n    }\n\n    this.#fns = [];\n  }\n\n  /**\n   * Вызовет функцию после изменения DOM, но до того как пользователь увидит\n   * изменения\n   */\n  add = (fn: () => void) => {\n    this.#fns.push(fn);\n  };\n}\n\n/**\n * Возвращает функцию которая вызывает callback после изменения DOM, но до того\n * как пользователь увидит изменения\n */\nexport function useLayoutEffectCall() {\n  const ref = React.useRef<LayoutEffectCall | null>(null);\n  if (!ref.current) {\n    ref.current = new LayoutEffectCall();\n  }\n\n  useIsomorphicLayoutEffect(() => {\n    ref.current!.run();\n  });\n\n  return ref.current.add;\n}\n"],"names":["React","useIsomorphicLayoutEffect","LayoutEffectCall","run","fn","add","push","useLayoutEffectCall","ref","useRef","current"],"mappings":";;;;AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,yBAAyB,QAAQ,sCAAsC;IAG9E;AADF,MAAMC;IAGJ;;GAEC,GACDC,MAAM;QACJ,KAAK,MAAMC,+BAAM,IAAI,EAAC,MAAM;YAC1BA;QACF;uCAEK,MAAO,EAAE;IAChB;;QAXA,gCAAA;;mBAA0B,EAAE;;QAa5B;;;GAGC,GACDC,uBAAAA,OAAM,CAACD;YACL,yBAAA,IAAI,EAAC,MAAKE,IAAI,CAACF;QACjB;;AACF;AAEA;;;CAGC,GACD,OAAO,SAASG;IACd,MAAMC,MAAMR,MAAMS,MAAM,CAA0B;IAClD,IAAI,CAACD,IAAIE,OAAO,EAAE;QAChBF,IAAIE,OAAO,GAAG,IAAIR;IACpB;IAEAD,0BAA0B;QACxBO,IAAIE,OAAO,CAAEP,GAAG;IAClB;IAEA,OAAOK,IAAIE,OAAO,CAACL,GAAG;AACxB"}