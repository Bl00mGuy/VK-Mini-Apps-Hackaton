{"version":3,"sources":["../../../../src/components/Gallery/hooks.ts"],"sourcesContent":["import * as React from 'react';\nimport { useStableCallback } from '../../hooks/useStableCallback';\nimport { useDOM } from '../../lib/dom';\nimport type { TimeoutId } from '../../types';\n\nexport function useAutoPlay(\n  timeout: number,\n  slideIndex: number,\n  callbackFnProp: VoidFunction,\n): void {\n  const { document } = useDOM();\n  const callbackFn = useStableCallback(callbackFnProp);\n\n  React.useEffect(\n    function initializeAutoPlay() {\n      if (!document || !timeout) {\n        return;\n      }\n\n      let timeoutId: TimeoutId = null;\n\n      const stop = () => {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n          timeoutId = null;\n        }\n      };\n\n      const start = () => {\n        switch (document.visibilityState) {\n          case 'visible':\n            stop();\n            timeoutId = setTimeout(callbackFn, timeout);\n            break;\n          case 'hidden':\n            stop();\n        }\n      };\n\n      start();\n\n      document.addEventListener('visibilitychange', start);\n\n      return () => {\n        stop();\n        document.removeEventListener('visibilitychange', start);\n      };\n    },\n    [document, timeout, slideIndex, callbackFn],\n  );\n}\n"],"names":["React","useStableCallback","useDOM","useAutoPlay","timeout","slideIndex","callbackFnProp","document","callbackFn","useEffect","initializeAutoPlay","timeoutId","stop","clearTimeout","start","visibilityState","setTimeout","addEventListener","removeEventListener"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,iBAAiB,QAAQ,gCAAgC;AAClE,SAASC,MAAM,QAAQ,gBAAgB;AAGvC,OAAO,SAASC,YACdC,OAAe,EACfC,UAAkB,EAClBC,cAA4B;IAE5B,MAAM,EAAEC,QAAQ,EAAE,GAAGL;IACrB,MAAMM,aAAaP,kBAAkBK;IAErCN,MAAMS,SAAS,CACb,SAASC;QACP,IAAI,CAACH,YAAY,CAACH,SAAS;YACzB;QACF;QAEA,IAAIO,YAAuB;QAE3B,MAAMC,OAAO;YACX,IAAID,WAAW;gBACbE,aAAaF;gBACbA,YAAY;YACd;QACF;QAEA,MAAMG,QAAQ;YACZ,OAAQP,SAASQ,eAAe;gBAC9B,KAAK;oBACHH;oBACAD,YAAYK,WAAWR,YAAYJ;oBACnC;gBACF,KAAK;oBACHQ;YACJ;QACF;QAEAE;QAEAP,SAASU,gBAAgB,CAAC,oBAAoBH;QAE9C,OAAO;YACLF;YACAL,SAASW,mBAAmB,CAAC,oBAAoBJ;QACnD;IACF,GACA;QAACP;QAAUH;QAASC;QAAYG;KAAW;AAE/C"}