{"version":3,"sources":["../../../../../src/components/Typography/EllipsisText/EllipsisText.tsx"],"sourcesContent":["import { useRef } from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useIsomorphicLayoutEffect } from '../../../lib/useIsomorphicLayoutEffect';\nimport type { HasRootRef } from '../../../types';\nimport type { RootComponentProps } from '../../RootComponent/RootComponent';\nimport styles from './EllipsisText.module.css';\n\nexport interface EllipsisTextProps\n  extends RootComponentProps<HTMLElement>,\n    HasRootRef<HTMLElement> {\n  /**\n   * Пользовательская маскимальная ширина.\n   *\n   * Используйте в случаях, когда у контейнера ширина зависит от размера контента,\n   * другими словами, когда ширина не ограничена.\n   */\n  maxWidth?: number;\n  /**\n   * Максимальное количество видимых строк\n   *\n   * > При `maxLines > 1` используется свойство line-clamp, которое поддерживается не всеми версиями браузеров. Используйте с осторожностью\n   * > @see [line-clamp](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp)\n   */\n  maxLines?: number;\n}\n\n/** Компонент ограничивает текстовый контент убирая его в многоточие.\n *\n * @since 6.1.0\n * @see https://vkcom.github.io/VKUI/#/EllipsisText\n */\nconst EllipsisText = ({\n  className,\n  getRootRef,\n  children,\n  maxWidth,\n  maxLines = 1,\n  ...restProps\n}: EllipsisTextProps): React.ReactNode => {\n  const contentRef = useRef<HTMLSpanElement | null>(null);\n\n  useIsomorphicLayoutEffect(() => {\n    if (contentRef && contentRef.current) {\n      contentRef.current.style.setProperty('-webkit-line-clamp', maxLines > 1 ? `${maxLines}` : '');\n    }\n  }, [contentRef, maxLines]);\n\n  return (\n    <span ref={getRootRef} className={classNames(styles['EllipsisText'], className)} {...restProps}>\n      <span\n        style={{ maxWidth }}\n        ref={contentRef}\n        className={classNames(\n          styles['EllipsisText__content'],\n          maxLines > 1 && styles['EllipsisText__content--multiline'],\n        )}\n      >\n        {children}\n      </span>\n    </span>\n  );\n};\n\nexport { EllipsisText };\n"],"names":["useRef","classNames","useIsomorphicLayoutEffect","styles","EllipsisText","className","getRootRef","children","maxWidth","maxLines","restProps","contentRef","current","style","setProperty","span","ref"],"mappings":";AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,yBAAyB,QAAQ,yCAAyC;AAGnF,OAAOC,YAAY,4BAA4B;AAqB/C;;;;CAIC,GACD,MAAMC,eAAe,CAAC,EACpBC,SAAS,EACTC,UAAU,EACVC,QAAQ,EACRC,QAAQ,EACRC,WAAW,CAAC,EACZ,GAAGC,WACe;IAClB,MAAMC,aAAaX,OAA+B;IAElDE,0BAA0B;QACxB,IAAIS,cAAcA,WAAWC,OAAO,EAAE;YACpCD,WAAWC,OAAO,CAACC,KAAK,CAACC,WAAW,CAAC,sBAAsBL,WAAW,IAAI,CAAC,EAAEA,SAAS,CAAC,GAAG;QAC5F;IACF,GAAG;QAACE;QAAYF;KAAS;IAEzB,qBACE,KAACM;QAAKC,KAAKV;QAAYD,WAAWJ,WAAWE,MAAM,CAAC,eAAe,EAAEE;QAAa,GAAGK,SAAS;kBAC5F,cAAA,KAACK;YACCF,OAAO;gBAAEL;YAAS;YAClBQ,KAAKL;YACLN,WAAWJ,WACTE,MAAM,CAAC,wBAAwB,EAC/BM,WAAW,KAAKN,MAAM,CAAC,mCAAmC;sBAG3DI;;;AAIT;AAEA,SAASH,YAAY,GAAG"}