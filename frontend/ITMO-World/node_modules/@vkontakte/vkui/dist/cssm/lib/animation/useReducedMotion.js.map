{"version":3,"sources":["../../../../src/lib/animation/useReducedMotion.ts"],"sourcesContent":["/* eslint-disable no-restricted-properties */\nimport * as React from 'react';\nimport { useDOM } from '../dom';\nimport { matchMediaListAddListener, matchMediaListRemoveListener } from '../matchMedia';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\n\nexport const REDUCE_MOTION_MEDIA_QUERY = 'screen and (prefers-reduced-motion: reduce)';\n\nexport const useReducedMotion = (): boolean => {\n  const { window } = useDOM();\n  const initial = React.useMemo(\n    () =>\n      window\n        ? window.matchMedia(REDUCE_MOTION_MEDIA_QUERY).matches\n        : /* istanbul ignore next: на текущий момент, покрытие данного кейса неинтересно  */\n          false,\n    [window],\n  );\n  const reducedMotion = React.useRef(initial);\n\n  useIsomorphicLayoutEffect(() => {\n    /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n    if (!window) {\n      return;\n    }\n    const match = window.matchMedia(REDUCE_MOTION_MEDIA_QUERY);\n    reducedMotion.current = match.matches;\n    /* istanbul ignore next: на текущий момент, покрытие данного кейса неинтересно  */\n    const handleMediaQueryChange = (event: MediaQueryListEvent) => {\n      /* istanbul ignore next */\n      reducedMotion.current = event.matches;\n    };\n    matchMediaListAddListener(match, handleMediaQueryChange);\n    return () => matchMediaListRemoveListener(match, handleMediaQueryChange);\n  }, [window]);\n\n  return reducedMotion.current;\n};\n"],"names":["React","useDOM","matchMediaListAddListener","matchMediaListRemoveListener","useIsomorphicLayoutEffect","REDUCE_MOTION_MEDIA_QUERY","useReducedMotion","window","initial","useMemo","matchMedia","matches","reducedMotion","useRef","match","current","handleMediaQueryChange","event"],"mappings":"AAAA,2CAA2C,GAC3C,YAAYA,WAAW,QAAQ;AAC/B,SAASC,MAAM,QAAQ,SAAS;AAChC,SAASC,yBAAyB,EAAEC,4BAA4B,QAAQ,gBAAgB;AACxF,SAASC,yBAAyB,QAAQ,+BAA+B;AAEzE,OAAO,MAAMC,4BAA4B,8CAA8C;AAEvF,OAAO,MAAMC,mBAAmB;IAC9B,MAAM,EAAEC,MAAM,EAAE,GAAGN;IACnB,MAAMO,UAAUR,MAAMS,OAAO,CAC3B,IACEF,SACIA,OAAOG,UAAU,CAACL,2BAA2BM,OAAO,GACpD,gFAAgF,GAChF,OACN;QAACJ;KAAO;IAEV,MAAMK,gBAAgBZ,MAAMa,MAAM,CAACL;IAEnCJ,0BAA0B;QACxB,6EAA6E,GAC7E,IAAI,CAACG,QAAQ;YACX;QACF;QACA,MAAMO,QAAQP,OAAOG,UAAU,CAACL;QAChCO,cAAcG,OAAO,GAAGD,MAAMH,OAAO;QACrC,gFAAgF,GAChF,MAAMK,yBAAyB,CAACC;YAC9B,wBAAwB,GACxBL,cAAcG,OAAO,GAAGE,MAAMN,OAAO;QACvC;QACAT,0BAA0BY,OAAOE;QACjC,OAAO,IAAMb,6BAA6BW,OAAOE;IACnD,GAAG;QAACT;KAAO;IAEX,OAAOK,cAAcG,OAAO;AAC9B,EAAE"}