{"version":3,"sources":["../../../src/hooks/useGlobalEscKeyDown.ts"],"sourcesContent":["import { Keys, pressedKey } from '../lib/accessibility';\nimport { useDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\nconst EVENT_OPTIONS = {\n  passive: true,\n  capture: true,\n};\n\n/**\n * Завязывается на document.\n *\n * @private\n */\nexport const useGlobalEscKeyDown = (\n  init: boolean,\n  callback?: (event: KeyboardEvent) => void,\n): void => {\n  const { document } = useDOM();\n  useIsomorphicLayoutEffect(() => {\n    if (!document || !init || !callback) {\n      return;\n    }\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (pressedKey(event) === Keys.ESCAPE) {\n        callback(event);\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown, EVENT_OPTIONS);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown, EVENT_OPTIONS);\n    };\n  }, [init, document, callback]);\n};\n"],"names":["Keys","pressedKey","useDOM","useIsomorphicLayoutEffect","EVENT_OPTIONS","passive","capture","useGlobalEscKeyDown","init","callback","document","handleKeyDown","event","ESCAPE","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,IAAI,EAAEC,UAAU,QAAQ,uBAAuB;AACxD,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,yBAAyB,QAAQ,mCAAmC;AAE7E,MAAMC,gBAAgB;IACpBC,SAAS;IACTC,SAAS;AACX;AAEA;;;;CAIC,GACD,OAAO,MAAMC,sBAAsB,CACjCC,MACAC;IAEA,MAAM,EAAEC,QAAQ,EAAE,GAAGR;IACrBC,0BAA0B;QACxB,IAAI,CAACO,YAAY,CAACF,QAAQ,CAACC,UAAU;YACnC;QACF;QACA,MAAME,gBAAgB,CAACC;YACrB,IAAIX,WAAWW,WAAWZ,KAAKa,MAAM,EAAE;gBACrCJ,SAASG;YACX;QACF;QACAF,SAASI,gBAAgB,CAAC,WAAWH,eAAeP;QACpD,OAAO;YACLM,SAASK,mBAAmB,CAAC,WAAWJ,eAAeP;QACzD;IACF,GAAG;QAACI;QAAME;QAAUD;KAAS;AAC/B,EAAE"}